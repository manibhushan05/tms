<!DOCTYPE html>
{% load staticfiles %}
{% load user_tags %}
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="description"
          content="Aaho is a one-stop solution for online truck booking for inter-city and inter-state road freight. Book, track, pay for and manage all your truck needs here.">

    <meta name="keywords"
          content="aaho, trans IQ, transiq, trans iq tech, transiq tech, trucks for hire, hire trucks, truck booking, freight booking, online truck booking, book truck online, hire truck online, intercity trucks, inter state trucks, truck transport india, trucking business india, logistics India, logistics technology">

    <!-- Meta, title, CSS, favicons, etc. -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="/static/aaho/images/logo/favicon.ico" rel="icon" type="image/x-icon">
    <meta name="theme-color" content="#ffffff">
    <title>Aaho - Online Truck Booking</title>

    <!-- Bootstrap -->
    <link href="{% static "vendor/bootstrap/3.3.6/css/bootstrap.min.css" %}" rel="stylesheet" type="text/css">

    <link rel="stylesheet" type="text/css"
          href="{% static "vendor/switchery/switchery.min.css" %}">

    <!-- Font Awesome -->
    <link href="{% static "vendor/font-awesome/css/font-awesome.min.css" %}" rel="stylesheet" type="text/css">
    <!-- jQuery custom content scroller -->
    <link href="{% static "vendor/mCustomScrollbar/jquery.mCustomScrollbar.min.css" %}" rel="stylesheet"
          type="text/css">

    <!-- Bootstrap styles -->
    {#    <link href="{% static "vendor/bootstrap/3.3.6/css/bootstrap.min.css" %}" rel="stylesheet">#}
    <!-- Generic page styles -->
    <link rel="stylesheet" type="text/css" href="{% static "vendor/fileupload/css/style.css" %}">
    <!-- blueimp Gallery styles -->
    <link rel="stylesheet" type="text/css" href="{% static "vendor/fileupload/css/blueimp-gallery.min.css" %}">
    <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
    <link rel="stylesheet" type="text/css" href="{% static "vendor/fileupload/css/jquery.fileupload-ui.css" %}">
    <!-- CSS adjustments for browsers with JavaScript disabled -->
    <noscript>
        <link rel="stylesheet" type="text/css"
              href="{% static "vendor/fileupload/css/jquery.fileupload-ui-noscript.css" %}">
    </noscript>
    <!-- Shim to make HTML5 elements usable in older Internet Explorer versions -->
    <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

    {% block css %}{% endblock %}
    <!-- Custom Theme Style -->
    <link href="{% static "vendor/gentelella/css/custom.min.css" %}" rel="stylesheet" type="text/css">
    <link href="{% static "vendor/select2/css/select2.min.css" %}" rel="stylesheet">
    <style>
        body {
            padding-top: 0px;
        }

        .titleTop {
            margin-top: -50px;
            position: absolute;
            margin-left: 50px;
        }

        .emp_group_1_4, .emp_group_1_2_4, .emp_group_4, .emp_group_1, .emp_group_1_2_3 {
            display: none !important;
        }
    </style>
</head>

<body class="nav-md">

<div class="container body">
    <div class="main_container">
        <div class="col-md-3 left_col menu_fixed">
            <div class="left_col scroll-view">
                <div class="navbar nav_title" style="border: 0;">
                    <a href="javascript:;" data-url="/customer/dashboard/" class="getAjaxPageDashboard site_title"><img
                            height="22vw"
                            src="{% static "aaho/images/logo/logo.png" %}"
                            alt="..."> <span>Aaho</span></a>
                </div>

                <!-- sidebar menu -->
                <div id="sidebar-menu" class="main_menu_side hidden-print main_menu">
                    <div class="menu_section" style="padding-top: 80px">
                        <ul class="nav side-menu">
                            <li id="homeMenu"><a href="javascript:;" data-url="/customer/dashboard/" id="homeDashboard"
                                                 class="getAjaxPageDashboard"><i class="fa fa-money"></i> Bookings</a>
                            </li>
                            <li><a href="javascript:;" data-url="/customer/invoices/" class="getAjaxPage"><i class="fa fa-file"></i>
                                Invoices</a>
                            </li>

                            <li><a href="javascript:;" data-url="/customer/contact-us/" class="getAjaxPage"><i class="fa fa-phone"></i>
                                Contact Us</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <!-- /sidebar menu -->
                <!-- /menu footer buttons -->
                <div class="sidebar-footer hidden-small" style="background-color: #172D44">
                    <h5 align="center">Trans IQ Technologies Pvt. Ltd.</h5>
                </div>
                <!-- /menu footer buttons -->
            </div>
        </div>
        <!-- top navigation -->
        <div class="top_nav">
            <div class="nav_menu">
                <nav class="" role="navigation">
                    <div class="nav toggle">
                        <a id="menu_toggle"><i class="fa fa-bars"></i></a>
                    </div>
                    {% block pageTitle %}
                    {% endblock %}
                    <ul class="nav navbar-nav navbar-right">
                        <li class="">
                            <a href="#" class="user-profile dropdown-toggle" data-toggle="dropdown"
                               aria-expanded="false">
                                <img src="{% static "aaho/images/img.png" %}" alt="">
                                <span class=" fa fa-angle-down"></span>
                            </a>
                            <ul class="dropdown-menu dropdown-usermenu pull-right">
                                <li><a href="javascript:;" data-url="/customer/change-password/" class="getAjaxPage"><i class="fa fa-lock pull-right"></i>
                                Change Password</a>
                            </li>
                            <li><a href="javascript:;" data-url="/customer/policy/" class="getAjaxPage"><i class="fa fa-user-secret pull-right"></i>
                                Terms of Use</a>
                            </li>
                                <li><a data-url="/api/logout/" href="javascript:;" class="customer-logout"><i
                                        class="fa fa-sign-out pull-right"></i>
                                    Logout</a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
        <!-- /top navigation -->

        <!-- page content -->
        {% block content %}{% endblock %}
    </div>
</div>

<!-- jQuery -->
<script src="{% static "vendor/jQuery/js/jquery.min.js" %}" type="text/javascript"></script>
<script src="{% static 'vendor/switchery/switchery.min.js' %}" type="text/javascript"></script>
<!-- Bootstrap -->
<script src="{% static "vendor/bootstrap/3.3.6/js/bootstrap.min.js" %}" type="text/javascript"></script>
<!-- FastClick -->
<script src="{% static "vendor/fastclick/fastclick.min.js" %}" type="text/javascript"></script>
<!-- NProgress -->
<script src="{% static "vendor/nprogress/js/nprogress.min.js" %}" type="text/javascript"></script>
{% block js %}{% endblock %}
<!-- jQuery custom content scroller -->
<script src="{% static "vendor/mCustomScrollbar/jquery.mCustomScrollbar.concat.min.js" %}"
        type="text/javascript"></script>
<!-- Custom Theme Scripts -->
<script src="{% static "vendor/gentelella/js/custom.min.js" %}" type="text/javascript"></script>
<script src="{% static "vendor/notify/notify.min.js" %}" type="text/javascript"></script>

<script>

    $(document).ready(function () {
        $(".dropdown-toggle").dropdown();
        window.localStorage.setItem("linkClicked", false);
        var link = localStorage.getItem('linkClicked');
        if (link == "false") {
            if (window.location.hash) {
                var hashUrl = window.location.hash.split('#')[1];
                ajaxPageCall(hashUrl);
            }
        }
    });

    window.addEventListener("hashchange", function (e) {
        var linkClicked = localStorage.getItem('linkClicked');
        if (linkClicked) {
            window.localStorage.setItem("linkClicked", false);
            var hashUrl = window.location.hash.split('#')[1];
            ajaxPageCall(hashUrl);
        }
        else {
            //if hash url not found trigger to get team dashboard page
            $('.getAjaxPageDashboard').trigger('click');
        }

    });
    $(document).on('click', '.customer-logout', function (e) {
        var url = $(this).attr('data-url');
        $.ajax({
            url: url,
            type: 'DELETE',
            dataType: 'json',
            contentType: 'application/json',
            headers: {"Authorization": localStorage.getItem('token')},
        }).done(function (response, status, request) {
            NProgress.done();
            window.location.href = '/customer/';
        }).fail(function (jqXHR, status, error) {
            $('#error-response').text(JSON.parse(jqXHR.responseText)['msg']);
            NProgress.done();
        });
    });
    $(document).on('click', '.getAjaxPageDashboard', function (e) {
        $.ajax({
            url: "/page/basic-full-booking/",
            type: 'get',
            dataType: 'html',
            contentType: 'application/json',
            headers: {"Authorization": localStorage.getItem('token')},
            // data: JSON.stringify(formData)
        }).done(function (response, status, request) {
            $('<form action="/customer/dashboard/" method="POST">' +
                '<input type="hidden" name="token" value="' + localStorage.getItem('auth_token') + '"/> ' +
                '</form>').appendTo($(document.body)).submit();
        }).fail(function (jqXHR, status, error) {
            $('#error-response').text(JSON.parse(jqXHR.responseText)['msg']);
        });
    });

    function getAjaxCallFunction(url) {
        window.localStorage.setItem("linkClicked", true);
        window.location.hash = url;
    }

    $(document).on('click', '.getAjaxPage', function (e) {
        window.localStorage.setItem("linkClicked", true);
        var data = {token: localStorage.getItem('auth_token')};
        var url = $(this).attr('data-url');
        // ajaxPageCall(url);
        window.location.hash = url;

    });

    function ajaxPageCall(url) {
        $('.right_col').html('');
        NProgress.start();
        $.ajax({
            url: url,
            type: 'GET',
            dataType: 'html',
            contentType: 'application/json',
            headers: {"Authorization": localStorage.getItem('token')},
        }).done(function (response, status, request) {
            NProgress.done();
            window.location.hash = url;
            $('.right_col').html(response);
        }).fail(function (jqXHR, status) {
            $('#error-response').text(JSON.parse(jqXHR.responseText)['msg']);
            NProgress.done();
        });
    }
</script>
</body>
</html>